<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consulta de Seguimento DM1 | Dr. Jorge Cecílio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        header h2 {
            font-size: 1.2em;
            font-weight: 300;
            opacity: 0.95;
        }

        .form-container {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
        }

        .section h3 {
            color: #667eea;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 1.4em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }

        input[type="text"],
        input[type="date"],
        input[type="number"],
        input[type="tel"],
        select,
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .checkbox-group,
        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .checkbox-group label,
        .radio-group label {
            display: flex;
            align-items: center;
            font-weight: normal;
        }

        .checkbox-group input,
        .radio-group input {
            margin-right: 5px;
            width: auto;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 6px;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .resultado {
            display: none;
            padding: 30px;
            background: #f9f9f9;
            margin-top: 30px;
            border-radius: 8px;
        }

        .prontuario-gerado {
            background: white;
            padding: 30px;
            border-radius: 6px;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            line-height: 1.8;
            border: 2px solid #e0e0e0;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .btn-success {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }
            .button-group {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Consulta de Seguimento</h1>
            <h2>Diabetes Mellitus Tipo 1 - Dr. Jorge Cecílio</h2>
        </header>

        <div class="form-container">
            <form id="consultaForm">
                <!-- Seção 1: Identificação -->
                <div class="section">
                    <h3>1. Identificação</h3>
                    
                    <div class="form-group">
                        <label for="nome">Nome Completo:</label>
                        <input type="text" id="nome" name="nome" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="dataNascimento">Data de Nascimento:</label>
                            <input type="date" id="dataNascimento" name="dataNascimento" required>
                        </div>
                        <div class="form-group">
                            <label for="idade">Idade:</label>
                            <input type="number" id="idade" name="idade" readonly>
                        </div>
                        <div class="form-group">
                            <label for="sexo">Sexo:</label>
                            <select id="sexo" name="sexo">
                                <option value="">Selecione</option>
                                <option value="Masculino">Masculino</option>
                                <option value="Feminino">Feminino</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="dataUltimaConsulta">Data da Última Consulta:</label>
                            <input type="date" id="dataUltimaConsulta" name="dataUltimaConsulta">
                        </div>
                        <div class="form-group">
                            <label for="telefone">Telefone:</label>
                            <input type="tel" id="telefone" name="telefone" placeholder="(00) 00000-0000">
                        </div>
                    </div>
                </div>

                <!-- Seção 2: Evolução desde Última Consulta -->
                <div class="section">
                    <h3>2. Evolução desde a Última Consulta</h3>

                    <div class="form-group">
                        <label for="queixas">Queixas Atuais:</label>
                        <textarea id="queixas" name="queixas" placeholder="Sintomas ou queixas que o paciente apresenta hoje"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="intercorrencias">Intercorrências desde a Última Consulta:</label>
                        <textarea id="intercorrencias" name="intercorrencias" placeholder="Internações, emergências, hipoglicemias graves, etc."></textarea>
                    </div>

                    <div class="form-group">
                        <label for="esquemaInsulina">Esquema de Insulina Atual:</label>
                        <textarea id="esquemaInsulina" name="esquemaInsulina" placeholder="Tipo de insulina, doses, horários"></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Adesão ao Tratamento:</label>
                            <div class="radio-group">
                                <label><input type="radio" name="adesao" value="Boa"> Boa</label>
                                <label><input type="radio" name="adesao" value="Regular"> Regular</label>
                                <label><input type="radio" name="adesao" value="Ruim"> Ruim</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="monitoramento">Frequência de Monitoramento Glicêmico:</label>
                        <input type="text" id="monitoramento" name="monitoramento" placeholder="Ex: 3x ao dia">
                    </div>

                    <div class="form-group">
                        <label>Hipoglicemias:</label>
                        <div class="radio-group">
                            <label><input type="radio" name="hipoglicemias" value="Sim" onclick="document.getElementById('detalhesHipo').style.display='block'"> Sim</label>
                            <label><input type="radio" name="hipoglicemias" value="Não" onclick="document.getElementById('detalhesHipo').style.display='none'"> Não</label>
                        </div>
                    </div>

                    <div class="form-group" id="detalhesHipo" style="display:none;">
                        <label for="frequenciaHipo">Detalhes das Hipoglicemias:</label>
                        <textarea id="frequenciaHipo" name="frequenciaHipo" placeholder="Frequência, sintomas, horários, gravidade"></textarea>
                    </div>
                </div>

                <!-- Seção 3: Exame Físico -->
                <div class="section">
                    <h3>3. Exame Físico</h3>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="peso">Peso (kg):</label>
                            <input type="number" id="peso" name="peso" step="0.1" min="0">
                        </div>
                        <div class="form-group">
                            <label for="altura">Altura (cm):</label>
                            <input type="number" id="altura" name="altura" step="0.1" min="0">
                        </div>
                        <div class="form-group">
                            <label for="imc">IMC:</label>
                            <input type="number" id="imc" name="imc" step="0.1" readonly>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="pa">Pressão Arterial (mmHg):</label>
                            <input type="text" id="pa" name="pa" placeholder="000/00">
                        </div>
                        <div class="form-group">
                            <label for="fc">Frequência Cardíaca (bpm):</label>
                            <input type="number" id="fc" name="fc" min="0">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="examePes">Exame dos Pés:</label>
                        <textarea id="examePes" name="examePes" placeholder="Sensibilidade, pulsos, lesões, deformidades"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="outrosAchados">Outros Achados ao Exame Físico:</label>
                        <textarea id="outrosAchados" name="outrosAchados"></textarea>
                    </div>
                </div>

                <!-- Seção 4: Exames e Conduta -->
                <div class="section">
                    <h3>4. Exames Laboratoriais e Conduta</h3>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="hba1c">HbA1c (%):</label>
                            <input type="number" id="hba1c" name="hba1c" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="dataHba1c">Data do Exame:</label>
                            <input type="date" id="dataHba1c" name="dataHba1c">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="glicemiaJejum">Glicemia de Jejum (mg/dL):</label>
                            <input type="number" id="glicemiaJejum" name="glicemiaJejum">
                        </div>
                        <div class="form-group">
                            <label for="creatinina">Creatinina (mg/dL):</label>
                            <input type="number" id="creatinina" name="creatinina" step="0.01">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="outrosExames">Outros Exames Recentes:</label>
                        <textarea id="outrosExames" name="outrosExames" placeholder="Lipidograma, função hepática, etc."></textarea>
                    </div>

                    <div class="form-group">
                        <label for="avaliacao">Avaliação e Controle Atual:</label>
                        <textarea id="avaliacao" name="avaliacao" placeholder="Análise do controle glicêmico e resposta ao tratamento"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="ajustes">Ajustes no Tratamento:</label>
                        <textarea id="ajustes" name="ajustes" placeholder="Mudanças de dose, introdução ou retirada de medicamentos"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="orientacoes">Orientações:</label>
                        <textarea id="orientacoes" name="orientacoes" placeholder="Dieta, atividade física, automonitoramento, cuidados"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="examesSolicitados">Exames Solicitados:</label>
                        <textarea id="examesSolicitados" name="examesSolicitados"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="retorno">Retorno:</label>
                        <input type="text" id="retorno" name="retorno" placeholder="Ex: 3 meses">
                    </div>
                </div>

                <div class="button-group">
                    <button type="submit">Gerar Prontuário</button>
                </div>
            </form>

            <div id="resultado" class="resultado">
                <h3>Prontuário Gerado</h3>
                <div class="button-group">
                    <button onclick="copiarTexto()">Copiar para Área de Transferência</button>
                    <button class="btn-secondary" onclick="exportarTexto()">Exportar TXT</button>
                    <button class="btn-success" onclick="window.print()">Imprimir</button>
                    <button onclick="novaConsulta()">Nova Consulta</button>
                </div>
                <div id="prontuarioGerado" class="prontuario-gerado"></div>
            </div>
        </div>
    </div>

    <script>
        // Calcular idade automaticamente
        document.getElementById('dataNascimento').addEventListener('change', function() {
            const dataNasc = new Date(this.value);
            const hoje = new Date();
            let idade = hoje.getFullYear() - dataNasc.getFullYear();
            const mes = hoje.getMonth() - dataNasc.getMonth();
            if (mes < 0 || (mes === 0 && hoje.getDate() < dataNasc.getDate())) {
                idade--;
            }
            document.getElementById('idade').value = idade;
        });

        // Calcular IMC automaticamente
        function calcularIMC() {
            const peso = parseFloat(document.getElementById('peso').value);
            const altura = parseFloat(document.getElementById('altura').value) / 100;
            if (peso && altura) {
                const imc = (peso / (altura * altura)).toFixed(1);
                document.getElementById('imc').value = imc;
            }
        }
        document.getElementById('peso').addEventListener('input', calcularIMC);
        document.getElementById('altura').addEventListener('input', calcularIMC);

        // Gerar prontuário
        document.getElementById('consultaForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const data = {};
            formData.forEach((value, key) => {
                data[key] = value;
            });

            const prontuario = `
╔════════════════════════════════════════════════════════════════════╗
║         PRONTUÁRIO DE CONSULTA DE SEGUIMENTO - DM TIPO 1          ║
║                      Dr. Jorge Cecílio                             ║
╚════════════════════════════════════════════════════════════════════╝

Data da Consulta: ${new Date().toLocaleDateString('pt-BR')}

═══════════════════════════════════════════════════════════════════════
IDENTIFICAÇÃO
═══════════════════════════════════════════════════════════════════════

Nome: ${data.nome || ''}
Data de Nascimento: ${data.dataNascimento ? new Date(data.dataNascimento).toLocaleDateString('pt-BR') : ''}
Idade: ${data.idade || ''} anos
Sexo: ${data.sexo || ''}
Telefone: ${data.telefone || ''}
Data da Última Consulta: ${data.dataUltimaConsulta ? new Date(data.dataUltimaConsulta).toLocaleDateString('pt-BR') : ''}

═══════════════════════════════════════════════════════════════════════
EVOLUÇÃO DESDE A ÚLTIMA CONSULTA
═══════════════════════════════════════════════════════════════════════

Queixas Atuais:
${data.queixas || 'Nenhuma queixa relatada'}

Intercorrências:
${data.intercorrencias || 'Sem intercorrências'}

Esquema de Insulina Atual:
${data.esquemaInsulina || 'Não informado'}

Adesão ao Tratamento: ${data.adesao || 'Não informada'}

Monitoramento Glicêmico: ${data.monitoramento || 'Não informado'}

Hipoglicemias: ${data.hipoglicemias || 'Não informado'}
${data.frequenciaHipo ? 'Detalhes: ' + data.frequenciaHipo : ''}

═══════════════════════════════════════════════════════════════════════
EXAME FÍSICO
═══════════════════════════════════════════════════════════════════════

Peso: ${data.peso || ''} kg
Altura: ${data.altura || ''} cm
IMC: ${data.imc || ''}

Pressão Arterial: ${data.pa || ''} mmHg
Frequência Cardíaca: ${data.fc || ''} bpm

Exame dos Pés:
${data.examePes || 'Não realizado'}

Outros Achados:
${data.outrosAchados || 'Sem alterações'}

═══════════════════════════════════════════════════════════════════════
EXAMES LABORATORIAIS
═══════════════════════════════════════════════════════════════════════

HbA1c: ${data.hba1c || ''} % (Data: ${data.dataHba1c ? new Date(data.dataHba1c).toLocaleDateString('pt-BR') : ''})
Glicemia de Jejum: ${data.glicemiaJejum || ''} mg/dL
Creatinina: ${data.creatinina || ''} mg/dL

Outros Exames:
${data.outrosExames || 'Não informado'}

═══════════════════════════════════════════════════════════════════════
AVALIAÇÃO E CONDUTA
═══════════════════════════════════════════════════════════════════════

Avaliação:
${data.avaliacao || ''}

Ajustes no Tratamento:
${data.ajustes || 'Manter esquema atual'}

Orientações:
${data.orientacoes || ''}

Exames Solicitados:
${data.examesSolicitados || 'Nenhum exame solicitado'}

Retorno: ${data.retorno || ''}

═══════════════════════════════════════════════════════════════════════

_______________________________________________
Dr. Jorge Cecílio
Especialista em Diabetes
`;

            document.getElementById('prontuarioGerado').textContent = prontuario;
            document.getElementById('resultado').style.display = 'block';
            document.getElementById('resultado').scrollIntoView({ behavior: 'smooth' });
        });

        function copiarTexto() {
            const texto = document.getElementById('prontuarioGerado').textContent;
            navigator.clipboard.writeText(texto).then(() => {
                alert('Prontuário copiado para a área de transferência!');
            }).catch(err => {
                alert('Erro ao copiar: ' + err);
            });
        }

        function exportarTexto() {
            const texto = document.getElementById('prontuarioGerado').textContent;
            const blob = new Blob([texto], { type: 'text/plain;charset=utf-8' });
            const link = document.createElement('a');
            const nome = document.getElementById('nome').value || 'paciente';
            const data = new Date().toISOString().split('T')[0];
            link.href = URL.createObjectURL(blob);
            link.download = `prontuario_${nome.replace(/\s+/g, '_')}_${data}.txt`;
            link.click();
        }

        function novaConsulta() {
            if (confirm('Deseja iniciar uma nova consulta? Os dados atuais serão perdidos.')) {
                document.getElementById('consultaForm').reset();
                document.getElementById('resultado').style.display = 'none';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }
    </script>
</body>
</html>
